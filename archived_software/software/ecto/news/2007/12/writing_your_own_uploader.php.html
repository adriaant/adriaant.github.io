<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><head>
	<meta http-equiv="content-type" content="text/html; charset=utf-8">
	<title>infinite-sushi.com - Writing your own uploader</title>
	<link rel="stylesheet" type="text/css" href="../../../../../assets/skin/style/style.css">
	<script type="text/javascript" src="../../../../../assets/skin/js/global.js"></script>
	<script type="text/javascript" src="../../mt-site.js"></script>	<link rel="alternate" type="application/rss+xml" title="RSS" href="../../index.xml.rss">	<link rel="alternate" type="application/atom+xml" title="Atom" href="../../atom.xml"></head>

<body>
<div id="container">
	<div id="banner">
		<ul id="glob">
	<li><a class="a" href="../../../../../contact/index.html" title="//contact/">contact</a></li>
</ul>		<h1><a href="../../../../../index.html">infinite sushi</a></h1>
			</div>
	<div id="topbar">
	<a class="on" id="ecto" href="../../../index.html" title="//software/ecto/"><span>ecto</span><br><em>desktop blogging</em></a>
	<a class="off" id="endo" href="../../../../endo/index.html" title="//software/endo/"><span>endo</span><br><em>total aggregation</em></a>
	<a class="off" id="duh1001" href="../../../../1001/index.html" title="//software/1001/"><span>1001</span><br><em>flickr accessory</em></a>
<p class="clear"><!-- --></p></div>
	<div id="center">
		<div id="sidebar-one">
		<ul class="navbar" id="loca">
	<li class="off"><a href="../../../screenshots/index.html" title="//software/ecto/screenshots/">screenshots</a></li>
	<li class="off"><a href="../../../download/index.html" title="//software/ecto/download/">download &amp; buy</a></li>
	<li class="off"><a href="../../../documentation/index.html" title="//software/ecto/documentation/">documentation</a></li>
	<li class="off"><a href="../../../support/index.html" title="//software/ecto/support/">support</a></li>
	<li class="on"><a href="../../index.html" title="//software/ecto/news/">news</a></li>
	<li class="off"><a href="../../../plugins/index.html" title="//software/ecto/plugins/">plugins</a></li>
	<li class="off"><a href="../../../scripts/index.html" title="//software/ecto/scripts/">scripts</a></li>
	<li class="off"><a href="../../../developer/index.html" title="//software/ecto/developer/">developer</a></li>
</ul>
		</div>
		<h2>Writing your own uploader</h2>
		<div id="content">
<!-- - - - - - - - - - - end top -->

<div id="blogmenu">
		«&nbsp;<a href="../10/ecto3_beta.php.html">ecto3 beta</a> |
	
	<a href="../../index.html">main page</a>
		| <a href="conversant_blog_system.php.html">Conversant blog system</a>&nbsp;»
	
</div>

<div class="blogentry">
	<div class="posted">Tue, 2007-12-04</div>
	<h4>Writing your own uploader</h4>
	<div class="discuss"></div>
	<div class="cats">
    <a href="../../developer/index.html" title="developer">developer</a>
   /   <a href="http://technorati.com/tag/addon" rel="tag">addon</a> /   <a href="http://technorati.com/tag/ecto3" rel="tag">ecto3</a> /   <a href="http://technorati.com/tag/uploader" rel="tag">uploader</a>
	</div>
	<div class="entrybody">
		<p>One of the reasons I rewrote ecto from the ground up into what is now available as <a href="../../../../../ecto.zip">ecto3 beta</a> is to allow for third-party add-ons. I wanted the application to become more modular and have a plug-in architecture. The first type of add-on that I am going to explain is the uploader. Some blog-systems allow users to upload files using either the appropriate XML-RPC or Atom call, but Blogger and a slew of others do not support that. For those alternative means should be available. ecto3 already has a built-in add-on that lets you upload images to Flickr. In this blog entry I will provide sample uploader code and directions on how to write your own. If you have the Cocoa skills, you could write an FTP or Picasa uploader.</p>
<p>The first step would be to download and unpack the <a href="../../../download/SampleUploader.zip">sample uploader</a>. It actually does not upload, but gives you a basic framework to work with. Once you've unpacked the sample, it's a good idea to rename the project. Let's assume your uploader will be called MyUploader. In the Finder, rename "SampleUploader.xcodeproj" to "MyUploader.xcodeproj". Double-click the file to open it. In the Groups &amp; Files list, click on "SampleUploader" under the "Targets" section. Select File → Get Info. Under "Build", find the values for "Product Name" and "Prefix Header" and rename them. Under "Properties", assign a unique identifier, e.g. com.thirdparty.ecto_myuploader and change the principal class to "MyUploader". Close the Get Info window.</p>
<p>Back in Groups &amp; Files, rename any files containing "SampleUploader" so that they contain "MyUploader". Rename the "SSUUploadWorker" files to something different as well. You will then have to rename the class names inside those files as well. In other words, class SampleUploader becomes MyUploader, and so forth.</p>
<p>Do NOT rename "UploaderInterface.h" and do NOT rename the "ECTOUploaderProtocol" protocol name.</p>
<p>In SampleUploader.m, you will also need to change the return value for <code>"-(NSString*)uploaderKey</code>" and "<code>-(NSString*)uploaderDescription</code>".</p>
<p>The uploader plug-in has two entry points. The first one is a method called when the user is accessing settings for a given attachment that uses the uploader: "-<code>(id)uploaderRequested:(NSMutableDictionary*)settings</code>". You can use this to allow users to specify a variety of general preferences (which you would store in NSUserDefaults) or attachment-specific settings, which are stored in the provided dictionary. See SampleUploaderSettings.m for an example.</p>
<p>The actual upload happens with a call to <code>-(void)uploadData:(NSDictionary*)data delegate:(id)del errorSelector:(SEL)err endSelector:(SEL)end statusSelector:(SEL)stat</code>. All the data you need for upload is provided in the "data" dictionary, which also includes any of the settings stored in the previously discussed method. The SampleUploader.m file lists the various available keys and how you can use them. It allocates an SUUploadWorker class, which does the actual upload. Once this object has done its job, a delegate call is made back to ecto to inform of the result. See <code>-(void)upload</code> for an example of what you need to return to ecto.</p>
<p>The most simple adaptation would only require changing <code>-(void)upload</code> in SUUploadWorker.m and writing code for the actual upload in there.</p>
<p>If you have any questions about writing an uploader, please visit the Developer support forum.</p>

		<a name="more"></a>
		
	</div>

		<div class="comments">
			<h5 id="comments"><a href="http://technorati.com/search/http:/infinite-sushi.com/software/ecto/news/2007/12/writing_your_own_uploader.php">Reactions on this post</a></h5>
    </div>

	

</div>
<!-- - - - - - - - - - - start bottom -->
		</div><!-- close content -->
	</div><!-- close center -->
	<div id="footer">
		<a href="../../../../../index.html" title="infinite-sushi.com">infinite-sushi.com</a><b>/</b><a href="../../../index.html">software</a><b>/</b><a href="../../../index.html">ecto</a><b>/</b><a href="../../index.html">news</a><b>/</b><a href="../index.html"></a>
	</div>
</div>
</body></html>
